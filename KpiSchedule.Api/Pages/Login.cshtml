@page
@model KpiSchedule.Api.LoginModel
@{
}

<html>
<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script async src="https://telegram.org/js/telegram-widget.js?21" data-telegram-login="kpi_schedule_com_bot" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
    <script type="text/javascript">
        function onTelegramAuth(user) {
            $.ajax({
                type: "POST",
                url: "@Url.Action("AuthenticateTelegramUser", "Login")",
                data: JSON.stringify(user),
                success: function (result) {
                    const authNode = document.createElement("p");
                    authNode.innerText = JSON.stringify(result);
                    document.body.appendChild(authNode);
                },
                dataType: "json",
                contentType: "application/json"
            })
        }
    </script>
</body>
</html>
